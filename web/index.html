<!DOCTYPE html>
<html lang="en">
<style>

    body {
        margin: 0;
    }

    canvas {
        width: 100vw;
        height: 100vh;
        position: absolute;
        top: 0;
        left: 0;
        background: url(https://threejsfundamentals.org/threejs/resources/images/daikanyama.jpg) no-repeat center center ;
    }








</style>
<meta charset="UTF-8">



<body>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="./lib/threejs/three.js"></script>


<script>
    var camera, scene, renderer;
    var geometry, material, mesh;

    init();
    animate();

    function init() {

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
        camera.position.z = 2;

        scene = new THREE.Scene();

        THREE.ImageUtils.crossOrigin = '';
        var bmap = new THREE.TextureLoader().load( 'https://miro.medium.com/max/4092/1*-vO6vIHeE67CAm6Mk3AcSA.png' );
        var cloudTexture = new THREE.TextureLoader().load("http://learningthreejs.com/data/2013-09-16-how-to-make-the-earth-in-webgl/demo/bower_components/threex.planets/images/earthcloudmaptrans.jpg");

        console.log(bmap);


        var planetGeometry = new THREE.SphereGeometry(1, 32 , 32);
        var planetMaterial = new THREE.MeshStandardMaterial({
            color: 0xffffff,
            bumpMap: bmap,
            bumpScale:  0.1
        });

        mesh = new THREE.Mesh(planetGeometry, planetMaterial);


        var cloudGeometry   = new THREE.SphereGeometry(1.2, 32, 32)
        var cloudMaterial  = new THREE.MeshPhongMaterial({
            map     : new THREE.Texture(cloudTexture),
            side        : THREE.DoubleSide,
            opacity     : 0.8,
            transparent : true,
            depthWrite  : false,
        });
        var cloudMesh = new THREE.Mesh(geometry, material)
        


        var light = new THREE.DirectionalLight( 0xffffff, 1, 100 );
        light.position.set( 1, 1, 1 ); 			//default; light shining from top
        light.castShadow = true;            // default false
        scene.add( light );

        //Set up shadow properties for the light
        light.shadow.mapSize.width = 512;  // default
        light.shadow.mapSize.height = 512; // default
        light.shadow.camera.near = 0.5;    // default
        light.shadow.camera.far = 500;     // default


        scene.add(mesh);
        scene.add(cloudMesh);

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);

        renderer.shadowMapEnabled = true;
        renderer.shadowMapType = THREE.PCFShadowMap;

        document.body.appendChild(renderer.domElement);


        const composer = new THREE.EffectComposer(renderer)
        var bloomEffect = new BloomEffect();
        const effectPass = new EffectPass(camera, bloomEffect);
        effectPass.renderToScreen = true;

        composer.addPass(effectPass);
        composer.addPass(new RenderPass(scene, camera));
        effectPass.renderToScreen = true;

        
        }

        function animate() {

            requestAnimationFrame(animate);

            mesh.rotation.y += 0.0015;



            renderer.render(scene, camera);

        }






</script>


</body>
</html>